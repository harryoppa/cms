(()=>{function t(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var e=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var o,r,a;return o=e,a=[{key:"loadWidget",value:function(t,o,r,a){TVHung.blockUI({target:t,iconOnly:!0,overlayColor:"none"}),void 0===r&&(r={}),$.ajax({type:"GET",cache:!1,url:o,data:r,success:function(o){TVHung.unblockUI(t),o.error?t.html('<div class="dashboard_widget_msg col-12"><p>'+o.message+"</p>"):(t.html(o.data),void 0!==a&&a(),0!==t.find(".scroller").length&&TVHung.callScroll(t.find(".scroller")),$(".equal-height").equalHeights(),e.initSortable())},error:function(e){TVHung.unblockUI(t),TVHung.handleError(e)}})}},{key:"initSortable",value:function(){if($("#list_widgets").length>0){var t=document.getElementById("list_widgets");Sortable.create(t,{group:"widgets",sort:!0,delay:0,disabled:!1,store:null,animation:150,handle:".portlet-title",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dataIdAttr:"data-id",forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,scroll:!0,scrollSensitivity:30,scrollSpeed:10,onEnd:function(){var t=[];$.each($(".widget_item"),(function(e,o){t.push($(o).prop("id"))})),$.ajax({type:"POST",cache:!1,url:route("dashboard.update_widget_order"),data:{items:t},success:function(t){t.error?TVHung.showError(t.message):TVHung.showSuccess(t.message)},error:function(t){TVHung.handleError(t)}})}})}}}],(r=[{key:"init",value:function(){var t=$("#list_widgets");$(document).on("click",".portlet > .portlet-title .tools > a.remove",(function(t){t.preventDefault(),$("#hide-widget-confirm-bttn").data("id",$(t.currentTarget).closest(".widget_item").prop("id")),$("#hide_widget_modal").modal("show")})),t.on("click",".page_next, .page_previous",(function(t){t.preventDefault(),e.loadWidget($(t.currentTarget).closest(".portlet").find(".portlet-body"),$(t.currentTarget).prop("href"))})),t.on("change",".number_record .numb",(function(t){t.preventDefault();var o=$(".number_record .numb").val();isNaN(o)?TVHung.showError("Please input a number!"):e.loadWidget($(t.currentTarget).closest(".portlet").find(".portlet-body"),$(t.currentTarget).closest(".widget_item").attr("data-url"),{paginate:o})})),t.on("click",".btn_change_paginate",(function(t){t.preventDefault();var o=$(".number_record .numb"),r=parseInt(o.val());$(t.currentTarget).hasClass("btn_up")&&(r+=5),$(t.currentTarget).hasClass("btn_down")&&(r-5>0?r-=5:r=0),o.val(r),e.loadWidget($(t.currentTarget).closest(".portlet").find(".portlet-body"),$(t.currentTarget).closest(".widget_item").attr("data-url"),{paginate:r})})),$("#hide-widget-confirm-bttn").on("click",(function(t){t.preventDefault();var e=$(t.currentTarget).data("id");$.ajax({type:"GET",cache:!1,url:route("dashboard.hide_widget",{name:e}),success:function(o){o.error?TVHung.showError(o.message):($("#"+e).fadeOut(),TVHung.showSuccess(o.message)),$("#hide_widget_modal").modal("hide");var r=$(t.currentTarget).closest(".portlet");$(document).hasClass("page-portlet-fullscreen")&&$(document).removeClass("page-portlet-fullscreen"),r.find(".portlet-title .fullscreen").tooltip("destroy"),r.find(".portlet-title .tools > .reload").tooltip("destroy"),r.find(".portlet-title .tools > .remove").tooltip("destroy"),r.find(".portlet-title .tools > .config").tooltip("destroy"),r.find(".portlet-title .tools > .collapse, .portlet > .portlet-title .tools > .expand").tooltip("destroy"),r.remove()},error:function(t){TVHung.handleError(t)}})})),$(document).on("click",".portlet:not(.widget-load-has-callback) > .portlet-title .tools > a.reload",(function(t){t.preventDefault(),e.loadWidget($(t.currentTarget).closest(".portlet").find(".portlet-body"),$(t.currentTarget).closest(".widget_item").attr("data-url"))})),$(document).on("click",".portlet > .portlet-title .tools > .collapse, .portlet .portlet-title .tools > .expand",(function(t){t.preventDefault();var o=$(t.currentTarget),r=$.trim(o.data("state"));"expand"===r?(o.closest(".portlet").find(".portlet-body").removeClass("collapse").addClass("expand"),e.loadWidget(o.closest(".portlet").find(".portlet-body"),o.closest(".widget_item").attr("data-url"))):o.closest(".portlet").find(".portlet-body").removeClass("expand").addClass("collapse"),$.ajax({type:"POST",cache:!1,url:route("dashboard.edit_widget_setting_item"),data:{name:o.closest(".widget_item").prop("id"),setting_name:"state",setting_value:r},success:function(){"collapse"===r?o.data("state","expand"):o.data("state","collapse")},error:function(t){TVHung.handleError(t)}})}));var o=$("#manage_widget_modal");$(document).on("click",".manage-widget",(function(t){t.preventDefault(),o.modal("show")})),o.on("change",".swc_wrap input",(function(t){$(t.currentTarget).closest("section").find("i").toggleClass("widget_none_color")}))}}])&&t(o.prototype,r),a&&t(o,a),e}();$(document).ready((function(){(new e).init(),window.BDashboard=e}))})();
